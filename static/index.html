<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Project Based Assessment</title>
  <link rel="manifest" href="./manifest.json" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css" integrity="sha384-c9MVH4yRDZMY+bSlECVISp9U4xBl1dKb5z4x8IgF6lBKTHsh1AtxHBfHiiA+S/Nr" crossorigin="anonymous">
  <link rel="stylesheet" href="./lib/dropzone.min.css" />
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.3/core.css">
  <link rel="stylesheet" href="./css.css?ref=202311233" />
  <link rel="SHORTCUT ICON" href="./favicon.ico" />
  <script type="module" src="https://pyscript.net/releases/2024.1.3/core.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid pl-3 pr-3">
      <a class="navbar-brand" href="#">Project Based Assessment</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse d-print-none" id="navbarNav">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="https://docs.projectassessment.app">Docs</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container-fluid pl-3 pr-3 d-none d-print-block">
    <h2>
      Project Based Assessment <span id="printTitleFile"></span>
    </h2>
  </div>

  <div class="modal fade" id="alertBox" role="dialog">
    <div class="modal-dialog">    
      <div class="modal-content">
        <div class="modal-body">
          <p id="alertError"></p>
        </div>
        <div class="modal-footer">
          <button type="button" id="closeAlert" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="dataMapping" tabindex="-1" role="dialog" aria-labelledby="dataMappingTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="dataMappingSelectColumn">Select columns used for analysis</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closeMappingButton">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" id="dataMappingBody">
          <form>
            <div class="form-group">
              <label for="kValueSelect">Select the columns containing the student rubric scores:</label>
              <select class="form-control" id="kValueSelect">
              </select>
            </div>
            <div class="form-group">
              <label for="boundSelect">Select the columns containing the maximum rubric score:</label>
              <select class="form-control" id="boundSelect">
              </select>
            </div>
            <div class="form-group">
              <label for="studentSelect">Select the columns with the student identifier:</label>
              <select class="form-control" id="studentSelect">
              </select>
            </div>
            <div class="form-group">
              <label for="rubricSelect">Select the columns with the rubric identifier:</label>
              <select class="form-control" id="rubricSelect">
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="closeMapping">Close</button>
          <button type="button" class="btn btn-primary" id="saveMapping">Save mapping</button>
        </div>
      </div>
    </div>
  </div>

  <div class="accordion" id="modelResults" style="display:none">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
          aria-expanded="true" aria-controls="collapseOne">
          Rubric Information
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show d-print-block" aria-labelledby="headingOne"
        data-bs-parent="#modelResults">
        <div class="accordion-body">
          <div class="container">
            <div class="row">
              <div class="d-none d-print-block">
                <h3>
                  Rubric Information
                </h3>
              </div>
              <div id="rubricTableRow" class="container">
                <table class="table" id="rubricTable">
                  <thead>
                    <tr id="rubricHeader">
                    </tr>
                  </thead>
                  <tbody id="rubricResults">
                  </tbody>
                </table>
                <div class="download d-print-none">
                  <button type="button" data-bs-toggle="tooltip"
                    data-bs-title="Calculates p-values with a block bootstrap.  This process can be slow."
                    class="btn btn-secondary btn-sm" id="startBootstrap" disabled>Start Bootstrap</button>
                  <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the above table as a CSV."
                    class="btn btn-secondary btn-sm" id="downloadRubric">Save</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingTwo">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo"
          aria-expanded="false" aria-controls="collapseTwo">
          Model Fit
        </button>
      </h2>
      <div id="collapseTwo" class="accordion-collapse collapse d-print-block" aria-labelledby="headingTwo"
        data-bs-parent="#modelResults">
        <div class="accordion-body">
          <div class="container">
            <div class="row">
              <div class="d-none d-print-block">
                <h3>
                  Model Fit
                </h3>
              </div>
              <div id="fitTableRow" class="container">
                <table class="table" id="fitTable">
                  <tbody id="modelFitResults">
                  </tbody>
                </table>
                <div class="download d-print-none">
                  <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the above table as a CSV."
                    class="btn btn-secondary btn-sm" id="downloadFit">Save</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingThree">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
          data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          Student KDE Estimates
        </button>
      </h2>
      <div id="collapseThree" class="accordion-collapse collapse d-print-block" aria-labelledby="headingThree"
        data-bs-parent="#modelResults">
        <div class="accordion-body">
          <div class="container">
            <div class="row">
              <div class="d-none d-print-block">
                <h3>
                  Student KDE Estimates
                </h3>
              </div>
              <div class="title">
                <h4>Average Logistic</h4>
              </div>
              <div id="studentKDE"></div>
              <div class="download d-print-none">
                <i class="bi bi-info-circle" data-bs-toggle="tooltip" id="alInfo" data-bs-title="Bandwidth calculated using Silverman's method."></i>
              </div>
              <div class="download d-print-none">
                <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the data from the graph above."
                  class="btn btn-secondary btn-sm saveStudentCSV">Save Data</button>
                <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the above graph as a SVG."
                  class="btn btn-secondary btn-sm" id="downloadStudentImage">Save Graph</button>
              </div>
              <div id="studentKDEStat">
                <table class="table" id="studentStatTable">
                  <tbody id="StatData">
                  </tbody>
                </table>
                <div class="download d-print-none">
                  <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the above table as a CSV."
                    class="btn btn-secondary btn-sm" id="downloadStudentML">Save</button>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="title">
                <h4>Average Marginal Logistic</h4>
              </div>
              <div id="studentKDEAML"></div>
              <div class="download d-print-none">
                <i class="bi bi-info-circle" data-bs-toggle="tooltip" id="amlInfo" data-bs-title="Bandwidth calculated using Silverman's method."></i>
              </div>
              <div class="download d-print-none">
                <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the data from the graph above."
                  class="btn btn-secondary btn-sm saveStudentCSV">Save Data</button>
                <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the above graph as a SVG."
                  class="btn btn-secondary btn-sm" id="downloadStudentImageAML">Save Graph</button>
              </div>
              <div id="studentKDEStatAML">
                <table class="table" id="studentStatTableAML">
                  <tbody id="StatDataAML">
                  </tbody>
                </table>
                <div class="download d-print-none">
                  <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the above table as a CSV."
                    class="btn btn-secondary btn-sm" id="downloadStudentAML">Save</button>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="title">
                <h4>Average Discrete Marginal Logistic</h4>
              </div>
              <div id="studentKDEDAML"></div>
              <div class="download d-print-none">
                <i class="bi bi-info-circle" data-bs-toggle="tooltip" id="dmlInfo" data-bs-title="Bandwidth calculated using Silverman's method."></i>
              </div>
              <div class="download d-print-none">                
                <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the data from the graph above."
                  class="btn btn-secondary btn-sm saveStudentCSV">Save Data</button>
                <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the above graph as a SVG."
                  class="btn btn-secondary btn-sm" id="downloadStudentImageDAML">Save Graph</button>
              </div>
              <div id="studentKDEStatDAML">
                <table class="table" id="studentStatTableDAML">
                  <tbody id="StatDataDAML">
                  </tbody>
                </table>
                <div class="download d-print-none">
                  <button type="button" data-bs-toggle="tooltip" data-bs-title="Saves the above table as a CSV."
                    class="btn btn-secondary btn-sm" id="downloadStudentDAML">Save</button>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="download d-print-none" id="clearGroupDiv">
                <button type="button" data-bs-toggle="tooltip"
                  data-bs-title="Remove the group(s) from the graphs and tables and treat all student estimates as one group."
                  class="btn btn-secondary btn-sm" id="clearGroups">Clear Groups</button>
              </div>
            </div>
          </div>
        </div>


        <div class="file-upload-wrapper container text-center d-print-none">
          <form action="#" class="dropzone" id="my-filter"></form>
        </div>
      </div>
    </div>
    <div class="container d-print-none">
      <div class="download d-print-none">
        <button type="button" class="btn btn-secondary btn-sm" id="printSheet">Print</button>
      </div>
    </div>
  </div>
  </div>


  <div class="container text-center d-print-none" id="newFileDiv">
    <div class="file-upload-wrapper" id="myDropZoneWrapper">
      <form action="#" class="dropzone" id="my-dropzone"></form>
    </div>
  </div>

  <div class="container text-center" id="loadingDiv">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div class="container text-center" id="firefoxDiv" style="display: none;">
    <div class="alert alert-primary d-print-none" role="alert">
      <p>This app does not support Firefox. It might work, but if you have problems, <a
          href="https://docs.projectassessment.app/ferpa-technology-and-limitations">please use a supported browser such
          as Chrome or Safari.</a></p>
    </div>
  </div>

  <div class="container text-center" id="errorDiv" style="display: none;">
    <div class="alert alert-primary d-print-none" role="alert">
      <p>Something loaded wrong. You should reload/refresh the page. If this problem persists, <a
          href="https://docs.projectassessment.app/ferpa-technology-and-limitations">please make sure you are running a
          supported browser such as Chrome or Safari.</a></p>
    </div>
  </div>

  <div class="fixed-bottom " id="progressFooter">
    <div class="container d-print-none">
      <div class="row">
        <div class="col-sm">
          <div class="alert alert-secondary" role="alert">
            <h4 class="alert-heading">Bootstrapping ...</h4>
            <p>During this process, the interface can become slow or unresponsive. Please keep this interface visible to
              prevent the tab from being paused by the browser.</p>
            <hr />
            <div class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
                aria-label="Bootstrap Progress" style="width: 0%" id="bootstrapProgress"></div>
            </div>
            <div class="cancel">
              <button type="button" class="btn btn-secondary btn-sm" id="cancelBootstrap">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/d3js/7.8.5/d3.min.js" integrity="sha384-su5kReKyYlIFrI62mbQRKXHzFobMa7BHp1cK6julLPbnYcCW9NIZKJiTODjLPeDh" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha384-1H217gwSVyLSIfaLxHbE7dRb3v4mYCKbpQvzx0cegeju1MVsGrX5xXxAvs/HgeFs" crossorigin="anonymous"></script>
  <script src="./lib/dropzone.min.js"></script>
  <script src="./lib/table2csv.js"></script>
  <script src="./responseCode.js?ref=20240218"></script>
  <script src="./chart.js?ref=202401182"></script>
  <script src="./onloadCode.js?ref=20240218"></script>
  <script type="py" src="./startup.py?ref=202401182" config="./pyscript.json" worker></script>
</body>

</html>
